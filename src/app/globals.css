@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: var(--font-geist-sans), Arial, Helvetica, sans-serif;
}

@layer base {
  :root {
    --background: 216 56% 94.3%; /* Light grayish-blue (#E9F0F8) */
    --foreground: 215 25% 27%; /* Dark blue/gray for readability */
    --card: 0 0% 100%;
    --card-foreground: 215 25% 27%;
    --popover: 0 0% 100%;
    --popover-foreground: 215 25% 27%;
    --primary: 208 98% 73.1%; /* Soft blue (#77B5FE) */
    --primary-foreground: 208 100% 15%; /* Dark blue for contrast on soft blue */
    --secondary: 216 30% 88%; /* Lighter shade of background for secondary elements */
    --secondary-foreground: 215 25% 27%;
    --muted: 216 30% 88%;
    --muted-foreground: 215 20% 45%;
    --accent: 267 43.3% 75.9%; /* Muted violet (#B19CD9) */
    --accent-foreground: 267 40% 25%; /* Dark violet for contrast on muted violet */
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 216 30% 80%; /* Adjusted border for light theme */
    --input: 216 30% 88%; /* Adjusted input for light theme */
    --ring: 208 98% 65%; /* Ring color related to primary */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;

    /* Sidebar specific theme variables */
    --sidebar-background: 210 30% 96%; /* Slightly off-white for sidebar */
    --sidebar-foreground: 215 25% 35%;
    --sidebar-primary: 208 98% 68%; /* Slightly darker primary for sidebar active elements */
    --sidebar-primary-foreground: 208 100% 15%;
    --sidebar-accent: 216 40% 90%; /* Lighter accent for hover states in sidebar */
    --sidebar-accent-foreground: 215 25% 27%;
    --sidebar-border: 216 30% 85%;
    --sidebar-ring: 208 98% 65%;
  }

  .dark {
    /* Keeping dark theme for completeness, but app is primarily light */
    --background: 215 28% 17%;
    --foreground: 0 0% 98%;
    --card: 215 28% 17%;
    --card-foreground: 0 0% 98%;
    --popover: 215 28% 17%;
    --popover-foreground: 0 0% 98%;
    --primary: 208 98% 73.1%;
    --primary-foreground: 208 100% 15%;
    --secondary: 215 20% 25%;
    --secondary-foreground: 0 0% 98%;
    --muted: 215 20% 25%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 267 43.3% 75.9%;
    --accent-foreground: 267 40% 95%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 215 20% 30%;
    --input: 215 20% 30%;
    --ring: 208 98% 65%;
    
    --sidebar-background: 215 25% 15%;
    --sidebar-foreground: 0 0% 95%;
    --sidebar-primary: 208 98% 68%;
    --sidebar-primary-foreground: 208 100% 15%;
    --sidebar-accent: 215 20% 22%;
    --sidebar-accent-foreground: 0 0% 95%;
    --sidebar-border: 215 20% 28%;
    --sidebar-ring: 208 98% 65%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Add sr-only utility class */
@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}

/* CSS for Quill formula preview */
.ql-formula {
  display: inline-block;
  padding: 3px 6px;
  background: #f0f0f0; /* A slightly different background for visibility */
  border: 1px solid #ccc; /* Add a border to make it look more like a button */
  border-radius: 4px;
  margin: 0 2px;
  font-family: 'KaTeX_Main', 'Times New Roman', serif; /* Use KaTeX fonts for consistency */
  font-size: 1em; /* Adjust as needed */
  cursor: pointer; /* Make it look clickable */
  user-select: none; /* Prevent text selection */
}

/* Optional: Style for when the formula is being edited, if Quill adds a specific class */
.ql-editing .ql-formula {
  background: #e0e0e0;
}

/* This will hide the default placeholder text like "[formula]" if Quill shows one */
.ql-editor .ql-formula::before {
  /* content: '[معادلة]'; Remove or change if Quill's default rendering is sufficient */
  /* color: #666; */
  /* font-size: 0.9em; */
  content: ""; /* Hide default placeholder if KaTeX renders it directly */
}


/* Custom styling for KaTeX rendered elements */
.katex {
  font-size: 1.1em; /* Default KaTeX font size */
  text-align: center; /* Center display-style math */
  direction: ltr; /* Math content is LTR */
}

.katex-display {
  margin: 1em 0; /* Add some margin for display-style equations */
  display: block; /* Ensure it takes full width for centering */
  overflow-x: auto; /* Allow horizontal scrolling for very long equations */
  overflow-y: hidden;
}

/* Ensure Quill editor content area has appropriate direction for mixed content */
.ql-editor {
  direction: rtl; /* Default to RTL for Arabic text */
  text-align: right;
}

.ql-editor .katex-display, .ql-editor .katex {
  direction: ltr; /* Override for KaTeX blocks */
  text-align: left;
}

/* Style for the editor itself if needed */
.ql-container {
  min-height: 200px; /* Ensure editor has a minimum height */
  border-radius: var(--radius);
  border: 1px solid hsl(var(--border));
}
.ql-toolbar.ql-snow {
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
  border: 1px solid hsl(var(--border));
  border-bottom: 0px; /* To merge with editor border */
}
